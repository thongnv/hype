<section>
    <div class="home-page">
        <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 left-box">
            <div class="type-events">
                <ul [class.show-all]="!showAll" (window:resize)="onResize($event)">
                    <li class="type-event-item" [class.active]="'all'==selected" (click)="onSelectEventType('all')">
                        <img src="../../assets/img/icons/All.png" width="30" height="30">
                        <span class="type-event-name text-capitalize">All</span>
                    </li>
                    <li *ngFor="let event of categories, let index = index" (click)="onSelectEventType(event)"
                        [class.active]="event.tid==selected" class="type-event-item">
                        <img [src]="event.icon" width="30" height="30">
                        <span class="type-event-name text-capitalize">{{event.name}}</span>
                    </li>
                    <li *ngIf="drawCategories?.length >= 6" class="type-event-more" (click)="showAllCategory(showAll)">
                        <b></b><b></b><b></b>
                    </li>
                </ul>
            </div>
            <div class="filter-events clearfix" [class.top-100]="selectedEventOrder.name == 'top 100'">
              <div class="tab-choose">
                <div id="timeFilter" class="btn-group tab-control" *ngIf="selectedEventOrder.name != 'top 100'">
                  <button *ngFor="let filter of eventFilter" (click)="onSelectEventFilter(filter)" type="button"
                          class="btn btn-default tab-control text-capitalize"
                          [class.active]="filter===selectedEventFilter">
                    {{filter.name}}
                  </button>
                </div>
                <div class="btn-group tab-control" id="filters">
                  <button *ngFor="let order of eventOrder" (click)="onSelectEventOrder(order)" type="button"
                          class="btn btn-default  text-capitalize" [class.active]="order===selectedEventOrder">
                    {{order.name}}
                  </button>
                </div>

              </div>
                <div class="clear"></div>
              <div class="tab-choose-option" *ngIf="selectedEventOrder.name!='top 100'">
                  <a (click)="showRagePrice()" class="price-range">price range <i class="fa fa-angle-down"
                                                                                  aria-hidden="true"></i></a>
                  <a (click)="showWhen()" class="when-button">when <i class="fa fa-angle-down" aria-hidden="true"></i></a>
                  <a (click)="onClearForm()" class="clear-filters-button">clear filters</a>
                  <div class="clearfix"></div>
                  <nouislider *ngIf="showPrice" [connect]="true" [min]="0" [max]="300" [step]="10"
                              [tooltips]="[true,true]"
                              [(ngModel)]="priceRange"
                              (change)="onChangePrice($event)"
                              class="price-slider">
                  </nouislider>
                  <div *ngIf="showPrice" class="price-desc"><span>$0</span><span>$150</span><span>$300</span></div>
                  <input *ngIf="showDate" style="margin-top: 1em; margin-bottom: 1em" class="form-control"
                         [options]="options" daterangepicker
                         (selected)="selectedDate($event)">
              </div>
            </div>
            <app-boostrap-alert *ngIf="msgContent" [type]="alertType" [content]="msgContent"></app-boostrap-alert>
            <div class="clear"></div>
            <div id="v-scrollable" class="section v-scrollable">
                <div *ngFor="let item of events; let i = index;trackBy:item?.nid"
                     class="wrap-each-items"
                     [class.article]="item.type=='article'"
                     id="v{{i}}">
                    <div *ngIf="item.type=='event'">
                        <div class="avatar-profile">
                            <a class="avatar-picture"><img [src]="item.field_images[0]" width="140"
                                                           height="140"></a>
                            <div class="cover-avatar-picture"></div>
                            <div class="date-month">{{item.created| amFromUnix | date:'MMM'}}</div>
                            <div class="date-number">{{item.created| amFromUnix | date:'dd'}}</div>
                        </div>
                        <div class="information-profile">
                            <div class="top-content">
                                <h4 class="information-title pointer" [routerLink]="[item.alias]">
                                    <p class="pull-left text-ellipsis real-title"
                                       *ngIf="item.title">
                                        {{item.title | truncate : 45}}
                                    </p>
                    <span *ngIf="item.field_event_option.field_price !='0' && (item.field_event_option.field_price|json) != 'null'"
                          class="free-price-button text-capitalize pull-right"
                          [class.free-price]="item.field_event_option.field_price == 'free'">${{item.field_event_option.field_price}}</span>

                    <span *ngIf="item.field_event_option.field_price =='0' || (item.field_event_option.field_price|json) == 'null'"
                          class="free-price-button text-capitalize pull-right"
                          [class.free-price]="item.field_event_option.field_price == '0' || (item.field_event_option.field_price|json) == 'null'">Free</span>
                                </h4>
                                <p class="detail-information"
                                   [innerHTML]="item.body | myHtml2Text | truncate : 80"></p>
                            </div>
                            <div class="bottom-content">
                                <h5 class="mentioned">Mentioned by</h5>
                                <ul class="mentioned-item" *ngIf="item.field_event_option.field_mentioned_by">
                                    <li *ngFor="let ment of item.field_event_option.field_mentioned_by | slice:0:3">
                                        <a class="mentioned-item-wrap" href="{{ment}}" target="_blank"><img
                                                [src]="'https://www.google.com/s2/favicons?domain='+ment" width="28"
                                                height="28"></a>
                                    </li>
                                    <ng-template #popContent>
                                        <!--<a class="mentioned_title" (click)="p.close()"><i fa class="fa-close"></i></a>-->
                                        <ul class="list-inline">
                                            <li *ngFor="let ment of item.field_event_option.field_mentioned_by">
                                                <a class="mentioned-item-wrap" href="{{ment}}" target="_blank">
                                                    <img [src]="'https://www.google.com/s2/favicons?domain='+ment"
                                                         width="28"
                                                         height="28">
                                                </a>
                                            </li>
                                        </ul>
                                    </ng-template>
                                    <button *ngIf="item.field_event_option.field_mentioned_by?.length >3"
                                            type="button" placement="top"
                                            style="background: transparent;outline: none"
                                            class="btn btn-secondary"
                                            [ngbPopover]="popContent"
                                            triggers="click:blur"
                                            #p="ngbPopover"
                                            (click)="p.open()"
                                            (document:mouseup)="p.close()"
                                            (document:touchend)="p.close()"
                                            popoverTitle="Mentioned by">
                                        <i fa class="fa-plus"></i>
                                    </button>
                                </ul>
                                <div class="pull-right comments-item-icon">
                                    <ul class="list-inline">
                                        <li>
                                            <span class="count_comment">Comments {{item.comment_count}}</span>
                                        </li>
                                        <li (click)="onLikeEmit(item)" class="heart-icon">
                                            <i fa class="fa-heart-o" [class.icon-heart]="!item.user_bookmark"
                                               [class.heart-selected]="item.user_bookmark" aria-hidden="true"></i>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="clear"></div>
                    </div>
                    <div *ngIf="item.type=='article'" class="article">
                        <div class="list-item">
                            <div class="heart" (click)="onLikeEmit(item)">
                                <i class="icon-sm" [class.icon-heart]="!item.user_bookmark"
                                   [class.icon-heart-selected]="item.user_bookmark" aria-hidden="true"></i>
                            </div>
                            <img *ngIf="item.field_images.length" [src]="item.field_images[0]" width="100%"
                                 height="300">
                            <div class="list-item-overlay"></div>
                            <div class="caption">
                                <h3 class="list-item-title" [routerLink]="[item.alias]">{{item.title | truncate :
                                    45}}</h3>
                                <a class="text-capitalize list-item-link" [routerLink]="[item.alias]">read &nbsp;<i
                                        class="fa fa-angle-right"
                                        aria-hidden="true"></i></a>
                            </div>
                        </div>
                    </div>
                </div>
                <!--#sdhkas-->
                <app-small-loader></app-small-loader>
            </div>
        </div>

        <div class="col-lg-6 col-xs-12 right-box map-right fixed-right hidden-xs hidden-sm">
            <sebm-google-map
                    [latitude]="lat"
                    [longitude]="lng"
                    [zoom]="mapZoom"
                    [disableDefaultUI]="false"
                    [zoomControl]="false"
                    [streetViewControl]="true"
                    [styles]="gMapStyles"
            >
                <gmap-geocode-marker [markers]="markers" [showCircle]="showCircle"
                                     [circleDraggable]="circleDraggable" [currentRadius]="currentRadius"
                                     (radiusChange)="markerRadiusChange($event)" [lat]="lat"
                                     (markerClick)="clickedMarker($event)"
                                     (dragEnd)="markerDragEnd($event)"
                                     [lng]="lng"></gmap-geocode-marker>

            </sebm-google-map>
        </div>
    </div>

</section>
