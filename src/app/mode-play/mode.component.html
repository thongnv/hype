<section>
    <div class="row">
        <div class="col-lg-6 col-xs-12 left-box">
            <form [formGroup]="filterFromMode" class="filterFromMode">
                <div ngbRadioGroup class="btn-block btn-filter-block" name="radioBasic" (change)="changeType()"
                     formControlName="filterMode">
                    <label class="btn btn-default">
                        <input type="radio" value="all"> All
                    </label>
                    <label class="btn btn-default">
                        <input type="radio" value="eat"> Eat
                    </label>
                    <label class="btn btn-default">
                        <input type="radio" value="play"> Play
                    </label>
                </div>
            </form>
            <form [formGroup]="filterCategory" class="filterCategory">
                <div>
                    <div ngbRadioGroup class="btn-block btn-filter-block" (change)="changeCategory()" name="radioBasic"
                         formControlName="filterCategory">
                        <label class="btn btn-default">
                            <img src="../../assets/img/icons/All.png" alt="All">
                            <span class="clearfix">
                                <input type="radio" value="all"> All
                            </span>
                        </label>
                        <label class="btn btn-default" *ngFor="let term of categories">
                            <img src="{{term.icon}}" alt="{{term.name}}">
                            <span class="clearfix"> </span>
                            <input type="radio" value="{{term.tid}}">{{term.name}}
                        </label>
                        <label *ngIf="categoriesDraw?.length > 6" class="btn btn-default more"
                               (click)="showAllKind(showAll)">
                            <i fa [class.fa-minus]="!showAll" class="fa-plus"></i>
                        </label>
                    </div>
                </div>
            </form>
            <div style="position: relative">
                <ul class="list-inline itemSort" [class.showTab]="!showTab">
                    <li>
                        <a (click)="showRagePriceFind(showPrice)" class="price-range">Price Range <i
                                [ngClass]="{'fa-angle-up':showPrice}" class="fa fa-angle-down"
                                aria-hidden="true"></i></a>
                    </li>
                    <li>
                        <a (click)="showCuisineFind(showCuisine)" class="when-button">Cuisine <i
                                [ngClass]="{'fa-angle-up':showCuisine}" class="fa fa-angle-down"
                                aria-hidden="true"></i></a>
                    </li>
                    <li>
                        <a (click)="showRateFind(showRate)" class="when-button">Ratings <i
                                [ngClass]="{'fa-angle-up':showRate}"
                                class="fa fa-angle-down"
                                aria-hidden="true"></i></a>
                    </li>
                    <li>
                        <a (click)="showBestFind(showBest)" class="when-button">Best For <i
                                [ngClass]="{'fa-angle-up':showBest,'fa-angle-down':!showBest}"
                                class="fa"
                                aria-hidden="true"></i></a>
                    </li>
                    <li class="type" *ngIf="!showTab">
                        <a (click)="showTypeFind(showType)" class="when-button">Type <i [class.fa-angle-up]="showType"
                                                                                        class="fa fa-angle-down"
                                                                                        aria-hidden="true"></i></a>
                    </li>
                    
                    <span class="showMoreType" (click)="showAllType(showTab)">
                        <i fa [class.fa-minus]="!showTab" class="fa-plus"></i>
                    </span>
                    
                </ul>
                
                <div class="find-content">

                    <nouislider *ngIf="showPrice" [connect]="true" [min]="0" [max]="1000" [step]="10"
                                [(ngModel)]="priceRange"
                                style="margin-top: 4em;"></nouislider>
                    <div *ngIf="showCuisine">
                        <div *ngFor="let item of filterData.cuisine; let in =index; trackBy:trackByIndex"
                             style="margin-left: 40px">
                            <div class="checkbox">
                                <input type="checkbox"
                                       (change)="cuisine && cuisine[item.name]=$event.target.checked ? true : undefined"
                                       [ngModel]="cuisine && cuisine[item.name]">{{item.name}}
                            </div>
                            <div class="" *ngIf="item.sub" style="margin-left: 30px;">
                                <div class="checkbox"
                                     *ngFor="let sb of item.sub; let i = index;trackBy:trackByIndex;">
                                    <input type="checkbox"
                                           (change)="cuisine && cuisine[sb.name]=$event.target.checked ? true : undefined"
                                           [ngModel]="cuisine && cuisine[sb.name]">{{sb.name}}
                                </div>
                            </div>
                        </div>
                    </div>
                    <div *ngIf="showRate" class="text-center">
                        <ngb-rating [(rate)]="currentRate">
                            <ng-template let-fill="fill">
                                <span class="star" [class.filled]="fill === 100">&#9733;</span>
                            </ng-template>
                        </ngb-rating>
                    </div>
                    <div *ngIf="showBest">
                        <div *ngFor="let item of filterData.best; let in =index" style="margin-left: 40px">
                            <div class="checkbox">
                                <input type="checkbox"
                                       (change)="best && best[item.name]=$event.target.checked ? true : undefined"
                                       [ngModel]="best && best[item.name]">{{item.name}}
                            </div>
                        </div>
                    </div>
                    <div *ngIf="showType">
                        <div *ngFor="let item of filterData.type; let in =index" style="margin-left: 40px">
                            <div class="checkbox">
                                <input type="checkbox"
                                       (change)="best && best[item.name]=$event.target.checked ? true : undefined"
                                       [ngModel]="best && best[item.name]">{{item.name}}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="actionFilter">
                <label class="btn btn-default" (click)="filterCancel()">Cancel</label>
                <label class="btn btn-default apply" (click)="filterSubmit()">Apply</label>
            </div>
            <div class="clearfix"></div>
            <!--<div class="list-header">-->
            <!--<div class="pull-left">Sort By</div>-->
            <!--<div class="pull-right">Clear Filters</div>-->
            <!--</div>-->
            <app-boostrap-alert *ngIf="msgContent" [type]="alertType" [content]="msgContent"></app-boostrap-alert>
            <div class="clearfix"></div>
            
            <div class="list-event" slimScroll (scroll)="onScrollDown($event)" width="auto" height="290px" size="7px"
                [railVisible]="true"
                [railOpacity]="0.1"
                [railColor]="'#ec3d62'"
                [color]="'#ec3d62'">
                <div class="items" *ngFor="let item of items; let index = 'index'"
                     [ngStyle]="{'transition': 'ease-in 15s'}" id="v{{index}}">
                    <div class="list-items">
                        <div class="avatar">
                            <div class="badge">#{{index +1}}</div>
                                <!--<img *ngIf="item.images && item.images?.length > 0" src="{{item.images[0].thumbnail}}">-->
                                <img *ngIf="item.images && item.images?.length > 0" src="assets/img/company/default_140x140.jpg">
                            <div (click)="onLikeEmit(item)" class="heart-icon">
                                <i fa class="fa-heart-o" [class.icon-heart]="!item.user_bookmark"
                                   [class.heart-selected]="item.is_favorite" aria-hidden="true"></i>
                            </div>
                        </div>
                        <div class="item-content">
                            <h3 class="name" [routerLink]="['/company',item.Company_Slug]">
                                {{item.Company_Name}}</h3>
                            <div class="clearfix"></div>
                            <ngb-rating [rate]="item.rating.average" disabled="true"></ngb-rating>
                            <div class="box-content">
                                <p>{{item.Email_Address}} | {{item.Tel_No}}</p>
                                <p *ngIf="item.YP_Address?.length > 0"
                                   [innerHTML]="item.YP_Address[0] | myHtml2Text | truncate : 45"></p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="list-bottom">
                    <div *ngIf="items?.length ==0">End Of List</div>
                </div>
            </div>

        </div>
        <div class="col-lg-6 col-xs-12 gmap-box">
            <div class="box-map">
                <sebm-google-map *ngIf="showMap"
                                 [latitude]="lat"
                                 [longitude]="lng"
                                 [zoom]="mapZoom"
                                 [styles]="roadmap"
                                 [disableDefaultUI]="false"
                                 [zoomControl]="false"
                                 [streetViewControl]="true"
                                 (mapClick)="mapClicked($event,index)"
                >
                    <gmap-geocode-marker [markers]="markers" [currentRadius]="currentRadius"
                                         (radiusChange)="markerRadiusChange($event)" [lat]="lat"
                                         (markerClick)="clickedMarker($event)"
                                         (dragEnd)="markerDragEnd($event)"
                                         [lng]="lng"></gmap-geocode-marker>

                </sebm-google-map>
            </div>
        </div>
    </div>
</section>
